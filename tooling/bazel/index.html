<!doctype html><html lang=en><head><meta charset=utf-8><meta content="metio.wtf" name=author><meta content="YoSQL" name=subject><meta content="Write more SQL" name=description><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Bazel"><meta property="og:description" content="bazel users can use the yosql-tooling-cli in their builds by following these steps:
Download the yosql-tooling-cli zip file from the latest release (or any prior version). Use a java_import rule to capture all .jar files used by yosql-tooling-cli java_import( name = &#34;yosql_tooling_cli&#34;, jars = [ &#34;lib/yosql-tooling-cli-x.y.z.jar&#34;, &#34;lib/yosql-codegen-x.y.z.jar&#34;, &#34;lib/yosql-models-immutables-x.y.z.jar&#34;, ... every other jar file from the 'lib' folder ], ) Use a java_binary rule to create a runnable binary for bazel java_binary( name = &#34;yosql&#34;, deps = [ &#34;:yosql_tooling_cli&#34;, ], main_class = &#34;wtf."><meta property="og:type" content="article"><meta property="og:url" content="https://yosql.projects.metio.wtf/tooling/bazel/"><meta property="article:section" content="tooling"><meta property="article:published_time" content="2019-06-16T18:23:45+02:00"><meta property="article:modified_time" content="2019-06-16T18:23:45+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bazel"><meta name=twitter:description content="bazel users can use the yosql-tooling-cli in their builds by following these steps:
Download the yosql-tooling-cli zip file from the latest release (or any prior version). Use a java_import rule to capture all .jar files used by yosql-tooling-cli java_import( name = &#34;yosql_tooling_cli&#34;, jars = [ &#34;lib/yosql-tooling-cli-x.y.z.jar&#34;, &#34;lib/yosql-codegen-x.y.z.jar&#34;, &#34;lib/yosql-models-immutables-x.y.z.jar&#34;, ... every other jar file from the 'lib' folder ], ) Use a java_binary rule to create a runnable binary for bazel java_binary( name = &#34;yosql&#34;, deps = [ &#34;:yosql_tooling_cli&#34;, ], main_class = &#34;wtf."><meta itemprop=name content="Bazel"><meta itemprop=description content="bazel users can use the yosql-tooling-cli in their builds by following these steps:
Download the yosql-tooling-cli zip file from the latest release (or any prior version). Use a java_import rule to capture all .jar files used by yosql-tooling-cli java_import( name = &#34;yosql_tooling_cli&#34;, jars = [ &#34;lib/yosql-tooling-cli-x.y.z.jar&#34;, &#34;lib/yosql-codegen-x.y.z.jar&#34;, &#34;lib/yosql-models-immutables-x.y.z.jar&#34;, ... every other jar file from the 'lib' folder ], ) Use a java_binary rule to create a runnable binary for bazel java_binary( name = &#34;yosql&#34;, deps = [ &#34;:yosql_tooling_cli&#34;, ], main_class = &#34;wtf."><meta itemprop=datePublished content="2019-06-16T18:23:45+02:00"><meta itemprop=dateModified content="2019-06-16T18:23:45+02:00"><meta itemprop=wordCount content="190"><meta itemprop=keywords content="Bazel,"><link href=https://yosql.projects.metio.wtf/tooling/bazel/ rel=canonical><link href=https://yosql.projects.metio.wtf/atom.xml rel=alternate title="YoSQL Atom" type=application/atom+xml><link href=https://yosql.projects.metio.wtf/index.xml rel=alternate title="YoSQL RSS" type=application/rss+xml><link href=https://yosql.projects.metio.wtf/sitemap.xml rel=sitemap title="YoSQL Sitemap" type=application/xml><link rel=author href=https://yosql.projects.metio.wtf/humans.txt><link rel=alternate type=application/rdf+xml title=FOAF href=https://yosql.projects.metio.wtf/foaf.rdf><link rel=license href=https://creativecommons.org/publicdomain/zero/1.0/><link href=https://yosql.projects.metio.wtf/css/mobile.min.f7b2f8e08197e3a93bca2dc49850674c55c72127825448c35fc3dac23935d22a4a86d6f23e946b2ea33e78e2adb319df3e2ebc62184d5957abdba8d693a482a0.css integrity="sha512-97L44IGX46k7yi3EmFBnTFXHISeCVEjDX8Pawjk10ipKhtbyPpRrLqM+eOKtsxnfPi68YhhNWVer26jWk6SCoA==" media="screen and (max-width: 800px)" rel=stylesheet><link href=https://yosql.projects.metio.wtf/css/tablet.min.7b33cca77c2e1d0e0510519f51f6ae57dde200dd55383fb484a5134842741cf9584dc8cee1781a2f205836190cf5185f2879c4e47591c457d27848ee20538ab6.css integrity="sha512-ezPMp3wuHQ4FEFGfUfauV93iAN1VOD+0hKUTSEJ0HPlYTcjO4XgaLyBYNhkM9RhfKHnE5HWRxFfSeEjuIFOKtg==" media="screen and (min-width: 801px) and (max-width: 1199px)" rel=stylesheet><link href=https://yosql.projects.metio.wtf/css/desktop.min.c4182a6d68c77dd9b9671179c4075a55282bef97efc44e6295a0a848a668d71bc08ed1390e3f389b61094a08ad9600308da13fe35b77eea7839ac86d2ad13c8a.css integrity="sha512-xBgqbWjHfdm5ZxF5xAdaVSgr75fvxE5ilaCoSKZo1xvAjtE5Dj84m2EJSgitlgAwjaE/41t37qeDmshtKtE8ig==" media="screen and (min-width: 1200px)" rel=stylesheet><link href=https://yosql.projects.metio.wtf/css/darkmode.min.2a5ba1ebf79d23ac725522a486af2ffebf831a4a634fc1471a4b0007daa25afb4417f20dc4cf0e2c1eeb8eb704183160ff9aaf84e060180993fe1e010ac6907f.css integrity="sha512-Kluh6/edI6xyVSKkhq8v/r+DGkpjT8FHGksAB9qiWvtEF/INxM8OLB7rjrcEGDFg/5qvhOBgGAmT/h4BCsaQfw==" media="screen and (prefers-color-scheme: dark)" rel=stylesheet><title>YoSQL &ndash; Bazel</title></head><body id=site><header id=header><h1 id=projectname><a id=rootlink href=https://yosql.projects.metio.wtf/>YoSQL</a>
<a href=https://yosql.projects.metio.wtf/sitemap/ title="show me all pages" id=sitemaplink><img class=svgimg src=https://yosql.projects.metio.wtf/images/sitemap.svg alt=sitemap width=30 height=30></a></h1><span id=actions><a href=https://matrix.to/#/%23yosql%3amatrix.org id=matrix title="lets talk"><img class=svgimg src=https://yosql.projects.metio.wtf/images/matrix.svg alt=matrix width=32 height=32>
</a><a href=https://metio.groups.io/g/yosql/topics id=email title="i want to write you an email"><img class=svgimg src=https://yosql.projects.metio.wtf/images/email.svg alt=email width=32 height=32>
</a><a href=https://github.com/metio/yosql id=github title="want some code?"><img class=svgimg src=https://yosql.projects.metio.wtf/images/github.svg alt=github width=32 height=32>
</a><a href=https://metio.groups.io/g/yosql/calendar id=calendar title="release calendar"><img class=svgimg src=https://yosql.projects.metio.wtf/images/calendar.svg alt=github width=32 height=32>
</a><a href=https://yosql.projects.metio.wtf/atom.xml id=newsfeed title="get notified about updates"><img class=svgimg src=https://yosql.projects.metio.wtf/images/rss.svg alt=newsfeed width=32 height=32></a></span></header><nav id=navigation><ul><h3 class="mobileonly menutitle">Links</h3><li class=mobileonly><a href=https://yosql.projects.metio.wtf/>Home</a></li><li class=mobileonly><a href=https://matrix.to/#/%23yosql%3amatrix.org>Let's talk on Matrix</a></li><li class=mobileonly><a href=https://metio.groups.io/g/yosql/topics>Send an email</a></li><li class=mobileonly><a href=https://github.com/metio/yosql>See some code at GitHub</a></li><li class=mobileonly><a href=https://metio.groups.io/g/yosql/calendar>Check the release calendar</a></li><li class=mobileonly><a href=https://yosql.projects.metio.wtf/atom.xml>Subscribe to the Atom feed</a></li><li class=mobileonly><a href=https://yosql.projects.metio.wtf/sitemap/>See all pages at the sitemap</a></li><hr class="mobileonly menudivider"><h3 class="mobile-and-tablet menutitle">Navigation</h3><li><a href=/tooling/ class=active>Tooling</a><ul><li><a href=/tooling/ant/>Ant</a></li><li class=active><a href=/tooling/bazel/>Bazel</a></li><li><a href=/tooling/cli/>CLI</a></li><li><a href=/tooling/gradle/>Gradle</a></li><li><a href=/tooling/maven/>Maven</a></li></ul></li><li><a href=/sql/>SQL</a><ul><li><a href=/sql/converters/>Converters</a></li><li><a href=/sql/sql-files/>SQL Files</a></li><li><a href=/sql/structure/>Structure</a></li></ul></li><li><a href=/configuration/>Configuration</a><ul><li><a href=/configuration/annotations/>Annotations</a></li><li><a href=/configuration/converter/>Converter</a></li><li><a href=/configuration/files/>Files</a></li><li><a href=/configuration/java/>Java</a></li><li><a href=/configuration/logging/>Logging</a></li><li><a href=/configuration/names/>Names</a></li><li><a href=/configuration/repositories/>Repositories</a></li><li><a href=/configuration/resources/>Resources</a></li><li><a href=/configuration/sql/>Sql</a></li></ul></li><li><a href=/benchmarks/>Benchmarks</a><ul><li><a href=/benchmarks/codegen/>Code Generation</a></li><li><a href=/benchmarks/db-access/>Database Access</a></li></ul></li><li><a href=/community/>Community</a><ul><li><a href=/community/alternatives/>Alternatives</a></li><li><a href=/community/help/>Help</a></li></ul></li></ul></nav><main id=content><h1 class=post-titel><a href=https://yosql.projects.metio.wtf/tooling/bazel/>Bazel
</a><a href=https://github.com/metio/yosql/commits/main/yosql-website/content/tooling/bazel.md><img src=https://yosql.projects.metio.wtf/images/history.svg height=16 width=14 class="icon svgimg" alt="see history">
</a><a href=https://github.com/metio/yosql/edit/main/yosql-website/content/tooling/bazel.md><img src=https://yosql.projects.metio.wtf/images/pencil.svg height=16 width=14 class="icon svgimg" alt="edit this page"></a></h1><div class=subtitle>Talks about:
&lt;a class="post-tag post-tag-bazel" href="/tags/bazel">Bazel&lt;/a></div><div id=post-content><p><a href=https://bazel.build/>bazel</a> users can use the <a href=../cli/>yosql-tooling-cli</a> in their builds by following these steps:</p><ol><li>Download the <code>yosql-tooling-cli</code> zip file from the <a href=https://github.com/metio/yosql/releases/latest>latest release</a> (or any prior version).</li><li>Use a <a href=https://bazel.build/reference/be/java#java_import>java_import</a> rule to capture all <code>.jar</code> files used by <code>yosql-tooling-cli</code></li></ol><pre tabindex=0><code>java_import(
    name = &#34;yosql_tooling_cli&#34;,
    jars = [
        &#34;lib/yosql-tooling-cli-x.y.z.jar&#34;,
        &#34;lib/yosql-codegen-x.y.z.jar&#34;,
        &#34;lib/yosql-models-immutables-x.y.z.jar&#34;,
        ... every other jar file from the &#39;lib&#39; folder
    ],
)
</code></pre><ol start=3><li>Use a <a href=https://bazel.build/reference/be/java#java_binary>java_binary</a> rule to create a runnable binary for bazel</li></ol><pre tabindex=0><code>java_binary(
    name = &#34;yosql&#34;,
    deps = [
        &#34;:yosql_tooling_cli&#34;,
    ],
    main_class = &#34;wtf.metio.yosql.tooling.cli.YoSQL&#34;,
)
</code></pre><ol start=4><li>Write .sql files in a directory of your choice (e.g. <code>persistence</code>)</li></ol><pre tabindex=0><code>project/
├── WORKSPACE
├── BUILD
└── persistence/   
    └── user/
        ├── findUser.sql
        └── addUser.sql
    └── item/
        ├── queryAllItems.sql
        └── createItemTable.sql
</code></pre><ol start=5><li>Declare a <a href=https://bazel.build/reference/be/general#filegroup>filegroup</a> that contains all of your SQL files:</li></ol><pre tabindex=0><code>filegroup(
  name = &#34;your-sql-files&#34;,
  srcs = glob([&#34;persistence/**/*.sql&#34;]),
)
</code></pre><ol start=6><li>Generate Java code by calling the previously defined <code>java_binary</code>:</li></ol><pre tabindex=0><code>genrule(
  name = &#34;your-repositories&#34;,
  srcs = [&#34;:your-sql-files&#34;],
  outs = [
    &#34;com/example/persistence/UserRepository.java&#34;,
    &#34;com/example/persistence/ItemRepository.java&#34;,
    ... all of your generated code
  ],
  cmd = &#34;&#34;&#34;
    $(location :yosql) generate
  &#34;&#34;&#34;,
  tools = [&#34;:yosql&#34;],
)
</code></pre><ol start=7><li>Depend on the generated sources by using the target name of the generated code in the <code>srcs</code> of another rule.</li></ol></div></main><footer id=footer><p xmlns:dct=http://purl.org/dc/terms/ xmlns:vcard=http://www.w3.org/2001/vcard-rdf/3.0#><a rel=license href=https://creativecommons.org/publicdomain/zero/1.0/><img src=https://yosql.projects.metio.wtf/images/cc0.png style=border-style:none alt=CC0 width=88px height=31px></a><br>To the extent possible under law,
<a rel=dct:publisher href=https://yosql.projects.metio.wtf/><span property="dct:title">metio.wtf</span>
</a>has waived all copyright and related or neighboring rights to
<span property="dct:title">yosql.projects.metio.wtf</span>.
This work is published from:
<span property="vcard:Country" datatype="dct:ISO3166" content="EN" about="https://yosql.projects.metio.wtf/">Germany</span></p></footer></body></html>